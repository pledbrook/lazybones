<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<title>Lazybones</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>document.addEventListener('DOMContentLoaded', prettyPrint)</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.4.0/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Lazybones</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_intro">1. Intro</a></li>
<li><a href="#_license">2. License</a></li>
<li><a href="#_install_it">3. Install it</a></li>
<li><a href="#_creating_projects">4. Creating projects</a></li>
<li><a href="#_sub_templates">5. Sub-templates</a></li>
<li><a href="#_search_templates">6. Search Templates</a></li>
<li><a href="#_configuration">7. Configuration</a>
<ul class="sectlevel2">
<li><a href="#_command_line">7.1. Command line</a></li>
<li><a href="#_custom_repositories">7.2. Custom Repositories</a></li>
<li><a href="#_package_aliases">7.3. Package aliases</a></li>
<li><a href="#_system_properties">7.4. System properties</a></li>
<li><a href="#_general_options">7.5. General options</a></li>
</ul>
</li>
<li><a href="#_build">8. Build</a>
<ul class="sectlevel2">
<li><a href="#_command_line_tool">8.1. Command line tool</a></li>
<li><a href="#_project_templates">8.2. Project templates</a></li>
<li><a href="#_template_versions">8.3. Template versions</a></li>
</ul>
</li>
<li><a href="#_templates">9. Templates</a>
<ul class="sectlevel2">
<li><a href="#_getting_started">9.1. Getting started</a></li>
<li><a href="#_create_a_template">9.2. Create a template</a></li>
<li><a href="#_create_a_post_install_script">9.3. Create a post-install script</a></li>
<li><a href="#_package_install_and_publish">9.4. Package, install and publish</a></li>
<li><a href="#_fine_tuning_the_packaging">9.5. Fine-tuning the packaging</a></li>
<li><a href="#_template_engines">9.6. Template engines</a></li>
<li><a href="#_subtemplates">9.7. Subtemplates</a></li>
<li><a href="#_post_install_script_in_depth">9.8. Post install script in-depth</a></li>
</ul>
</li>
<li><a href="#_contribution_guidelines">10. Contribution guidelines</a>
<ul class="sectlevel2">
<li><a href="#_philosophy">10.1. Philosophy</a></li>
<li><a href="#_documentation">10.2. Documentation</a></li>
<li><a href="#_testing">10.3. Testing</a></li>
<li><a href="#_commit_messages">10.4. Commit messages</a></li>
<li><a href="#_formatting">10.5. Formatting</a></li>
</ul>
</li>
<li><a href="#_credits">11. Credits</a>
<ul class="sectlevel2">
<li><a href="#_developers">11.1. Developers</a></li>
<li><a href="#_contributors">11.2. Contributors</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./images//lazybones-logo.svg" alt="lazybones logo" width="300">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_intro">1. Intro</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lazybones was born out of frustration that Ratpack does not and will
not have a command line tool that will bootstrap a project. It&#8217;s a
good decision for Ratpack, but I&#8217;m lazy and want tools to do the
boring stuff for me.</p>
</div>
<div class="paragraph">
<p>The tool is very simple: it allows you to create a new project
structure for any framework or library for which the tool has a
template. You can even contribute templates by sending pull requests
to this GitHub project or publishing the packages to the relevant
Bintray repository (more info available below).</p>
</div>
<div class="paragraph">
<p>The concept of Lazybones is very similar to Maven archetypes, and what
Yeoman does for web applications. Lazybones also includes a
subtemplates feature that resembles the behaviour of Yeoman&#8217;s
sub-generators, allowing you to generate optional extras (controllers,
scaffolding etc.) inside a project.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_license">2. License</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>Lazybones</strong> project is open sourced under the
<a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache 2 License</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install_it">3. Install it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Grab lazybones from sdkman (formerly gvm):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">sdk install lazybones</code></pre>
</div>
</div>
<div class="paragraph">
<p>or alternatively, grab the distribution from
Bintray, unpack it to a local directory, and then add its 'bin'
directory to your PATH environment variable.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_projects">4. Creating projects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To create a new project, run</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones create &lt;template name&gt; &lt;template version&gt; &lt;target directory&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>So if you wanted to create a skeleton Ratpack project in a new
'my-rat-app' directory you would run</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones create ratpack 1.2.0 my-rat-app</code></pre>
</div>
</div>
<div class="paragraph">
<p>The version is optional and if you leave it out, Lazybones will
install the latest version of the template it can find.</p>
</div>
<div class="paragraph">
<p>Named templates are all stored on Bintray. By default, Lazybones
searches for templates in the pledbrook/lazybones-templates
repository, but you can use other Bintray repositories by adding some
configuration - set the Custom Repositories section under
Configuration later in this document.</p>
</div>
<div class="paragraph">
<p>You&#8217;re not limited to only Bintray as you can install templates
directly from a URL too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones create http://dl.bintray.com/kyleboon/lazybones/java-basic-template-0.1.zip my-app</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course it can be pretty laborious copying and pasting URLs around,
so Lazybones allows you to configure aliases for URLs that you use
frequently. By adding the following configuration to your Lazybones
settings file, <code>~/.lazybones/config.groovy</code> (see below for more details
on this), you can install the template by name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">templates {
    mappings {
        myTmpl = "http://dl.bintray.com/..."
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In other words, you could now run</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones create myTmpl my-app</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that when using the URL option, there is no need to specify a
version. You should also be aware that mappings take precedence,
i.e. if a mapping has the same name as an existing template, the
mapping is used. This essentially creates a simple override mechanism.</p>
</div>
<div class="paragraph">
<p>There is just one more thing to say about the <code>create</code> command: by
default it creates the specified directory and puts the initial
project in there. If you want to unpack a template in the current
directory instead, for example if you have already created the project
directory, then just pass '.' as the directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">lazybones create ratpack .</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you have created a new project from a template, you may notice
that the project directory contains a .lazybones sub directory. You
may delete this, but then you won&#8217;t be able to use the <code>generate</code>
command (see next section) if the project template has support for it.</p>
</div>
<div class="paragraph">
<p>Many project templates request information from you, such as a project
name, a group ID, a default package, etc. If this is the umpteenth
time you have created a project from a given template, then answering
the questions can become tedious. There is also the problem of
scripting and automation when you want to create a project without
user intervention. The solution to both these issues is to pass the
values on the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones create ratpack 1.2.0 ratapp -Pgroup=org.example -Ppackage=org.example.myapp</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>-P</code> option allows you to pass property values into the project
templates without user intervention. The key is to know what the
property names are, and that comes down to the project template. At
the moment, the best way to find out what those properties are is to
look at the post-install script itself.</p>
</div>
<div class="paragraph">
<p>The last option to mention is <code>--with-git</code> which will automatically
create a new git repository in the project directory. The only
requirement is that you have the git command on your path.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sub_templates">5. Sub-templates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As of Lazybones version 0.7, project templates can incorporate
subtemplates. Imagine that you have just created a new web application
project from a template and that template documents that you can
create new controllers using a sub- template named <code>controller</code>. To
use it, just <code>cd</code> into the project directory and run</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones generate controller</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will probably ask you for the name of the controller and its
package before generating the corresponding controller file in your
project. You can reuse the command to create as many controllers as
you need.</p>
</div>
<div class="paragraph">
<p>As with the <code>create</code> command, you can also pass in property values on
the command line if the subtemplate is parameterised:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones generate controller -Ppackage=org.example.myapp -Pclass=Book</code></pre>
</div>
</div>
<div class="paragraph">
<p>The last option available to you as a user is template
qualifiers. These only work if the subtemplate supports them, but they
allow you to pass additional information in a concise way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones generate artifact::controller</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the template name is <code>artifact</code>, but we have qualified
it with an extra controller. You can pass in as many qualifiers as you
want, you just separate them with <code>::</code>.</p>
</div>
<div class="paragraph">
<p>Note that you do not specify a version with the <code>generate</code>
command. This is because the subtemplates are embedded directly in the
project template, and so there can only be one version available to
you.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_search_templates">6. Search Templates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To see what templates you can install, run</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones list</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will list all aliases and remote templates. If you want to see
what templates you have cached locally, run</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones list --cached</code></pre>
</div>
</div>
<div class="paragraph">
<p>In fact, <code>--cached</code> is implied if Lazybones can&#8217;t connect to the internet.</p>
</div>
<div class="paragraph">
<p>You can also find out more about a template through the info command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones info &lt;template name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will print a description of the template and what versions are
available for it. If you&#8217;re offline, this will simply display an error
message.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">7. Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lazybones will run out of the box without any extra configuration, but
the tool does allow you to override the default behaviour via a fixed
set of configuration options. These options can be provided in a
number of ways following a set order of precedence:</p>
</div>
<div class="paragraph">
<p>System properties of the form <code>lazybones.*</code>, which can be passed into
the app via either <code>JAVA_OPTS</code> or <code>LAZYBONES_OPTS</code> environment
variables. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">env JAVA_OPTS="-Dlazybones.config.file=/path/to/my-custom-default-config.groovy" lazybones ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Highest precedence, i.e. it overrides all other sources of setting
data.</p>
</div>
<div class="paragraph">
<p>User configuration file in <code>$USER_HOME/.lazybones/config.groovy</code>. This
is parsed using Groovy&#8217;s ConfigSlurper, so if you&#8217;re familiar with
that syntax you&#8217;ll be right at home. Otherwise, just see the examples
below.</p>
</div>
<div class="paragraph">
<p>(Since 0.8) A JSON configuration file in
<code>$USER_HOME/.lazybones/managed-config.groovy</code> that is used by the
config commands. You can edit it this as well.</p>
</div>
<div class="paragraph">
<p>A Groovy-based default configuration file that is provided by the
application itself, but you can specify an alternative file via the
<code>lazybones.config.file</code> system property.</p>
</div>
<div class="paragraph">
<p>Lazybones also provides a convenient mechanism for setting and
removing options via the command line: the config command.</p>
</div>
<div class="sect2">
<h3 id="_command_line">7.1. Command line</h3>
<div class="paragraph">
<p>The config command provides several sub-commands that allow you to
interact with the persisted Lazybones configuration; specifically, the
JSON config file. You run a sub-command via</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones config &lt;sub-cmd&gt; &lt;args&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>&lt;sub-cmd&gt;</code> is one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>set &lt;option&gt; &lt;value&gt; [&lt;value&gt; &#8230;&#8203;]</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Allows you to change the value of a configuration setting. Multiple
values are treated as a single array/list value. The new value
replaces any existing one.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>add &lt;option&gt; &lt;value&gt;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Appends an extra value to an existing array/list setting. Reports an
error if the setting doesn&#8217;t accept multiple values. If the setting
doesn&#8217;t already have a value, this command will initialise it with an
array containing the given value.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>clear &lt;option&gt;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Removes a setting from the configuration, effectively reverting it to
whatever the internal default is.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>show [--all] &lt;option&gt;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Shows the current value of a setting. You can use the <code>--all</code> argument
(without a setting name) to display all the current settings and their
values.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>list</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Displays all the configuration settings supported by Lazybones.</p>
</div>
<div class="paragraph">
<p>So what configuration settings are you likely to customise?</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom_repositories">7.2. Custom Repositories</h3>
<div class="paragraph">
<p>Lazybones will by default download the templates from a specific
Bintray repository. If you want to host template packages in a
different repository you can add it to Lazybone&#8217;s search path via the
<code>bintrayRepositories</code> setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">bintrayRepositories = [
      "kyleboon/lazybones",
      "pledbrook/lazybones-templates"
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a template exists in more than one repository, it will be
downloaded from the first repository in the list that it appears in.</p>
</div>
</div>
<div class="sect2">
<h3 id="_package_aliases">7.3. Package aliases</h3>
<div class="paragraph">
<p>If you regularly use a template at a specific URL rather than from
Bintray, then you will want to alias that URL to a name. That&#8217;s where
template mappings (or aliases) come in. The aliases are defined as
normal settings of the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">templates.mappings.&lt;alias&gt; = &lt;url&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In a Groovy configuration file, you can define multiple aliases in a block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">templates {
    mappings {
        test = "http://dl.dropboxusercontent.com/u/29802534/custom-ratpack.zip"
        after = "file:///var/tmp/afterburnerfx-2.0.0.zip"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, add them from the command line like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones config set templates.mappings.after file:///var/tmp/afterburnerfx-2.0.0.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>The aliases will always be available to you until you remove them from
the persisted configuration.</p>
</div>
</div>
<div class="sect2">
<h3 id="_system_properties">7.4. System properties</h3>
<div class="paragraph">
<p><strong>(Since 0.8.1)</strong></p>
</div>
<div class="paragraph">
<p>Many people have to work behind a proxy, but Lazybones didn&#8217;t make it
easy to configure one. In fact the only way to do it was to add the
relevant system properties to a <code>JAVA_OPTS</code> environment variable. From
0.8.1, you now have another option.</p>
</div>
<div class="paragraph">
<p>Lazybones has stolen the idea of having a special form of
configuration option for system properties from Gradle. So if you
define a property with a <code>systemProp</code>. prefix, it will be added as a
system property internally. So to configure an HTTP proxy, you only
need to add the following to your Lazybones configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">systemProp {
    http {
        proxyHost = "localhost"
        proxyPort = 8181
    }
    https {
        proxyHost = "localhost"
        proxyPort = 8181
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To avoid potential configuration issues, use the same proxy settings
for HTTP and HTTPS if possible.</p>
</div>
<div class="paragraph">
<p>If your proxy requires authentication, you will need to add a couple
of extra properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">systemProp {
    http {
        proxyUser = "johndoe"
        proxyPassword = "mypassword"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As with the host and port, there are <code>https</code> variants of the username
and passwordi as well.</p>
</div>
</div>
<div class="sect2">
<h3 id="_general_options">7.5. General options</h3>
<div class="paragraph">
<p>These are miscellaneous options that can be overridden on the command
line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">// &lt;-- This starts a line comment
// Set logging level - overridden by command line args
options.logLevel = "SEVERE"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The logging level can either be overridden using the same logLevel
setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones --logLevel SEVERE info ratpack</code></pre>
</div>
</div>
<div class="paragraph">
<p>or via <code>--verbose</code>, <code>--quiet</code>, and <code>--info</code> options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones --verbose info ratpack</code></pre>
</div>
</div>
<div class="paragraph">
<p>The logging level can be one of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OFF</p>
</li>
<li>
<p>SEVERE</p>
</li>
<li>
<p>WARNING</p>
</li>
<li>
<p>INFO</p>
</li>
<li>
<p>FINE</p>
</li>
<li>
<p>FINEST</p>
</li>
<li>
<p>ALL</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_build">8. Build</h2>
<div class="sectionbody">
<div class="paragraph">
<p>his project is split into two parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The lazybones command line tool; and</p>
</li>
<li>
<p>The project templates.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_command_line_tool">8.1. Command line tool</h3>
<div class="paragraph">
<p>The command line tool is created via Gradle&#8217;s application plugin. The
main class is <code>uk.co.cacoethes.lazybones.LazyBonesMain</code>, which currently
implements all the sub-commands (create, list, etc.) as concrete
methods.</p>
</div>
<div class="paragraph">
<p>The main class plus everything else under src/main is packaged into a
<code>lazybones</code> JAR that is included in the distribution zip. The
application Gradle plugin generates a lazybones script that then runs
the main class with all required dependencies on the classpath.</p>
</div>
<div class="paragraph">
<p>To build the distribution, simply run</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">./gradlew distZip</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_project_templates">8.2. Project templates</h3>
<div class="paragraph">
<p>The project templates are simply directory structures with whatever
files in them that you want. Ultimately, the template project
directories will be zipped up and stored on
<a href="https://bintray.com/repo/browse/pledbrook/lazybones-templates">Bintray</a>. From
there, lazybones downloads the zips on demand and caches them in a
local user directory (currently ~/.lazybones/templates).</p>
</div>
<div class="paragraph">
<p>If you want empty directories to form part of the project template,
then simply add an empty .retain file to each one. When the template
archive is created, any .retain files are filtered out (but the
containing directories are included).</p>
</div>
<div class="paragraph">
<p>To package up a template, simply run</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">./gradlew packageTemplate&lt;TemplateName&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The name of the project template comes from the containing directory,
which is assumed to be lowercase hyphenated. The template name is the
equivalent camel case form. So the template directory structure in
src/templates/my-template results in a template called 'MyTemplate',
which can be packaged with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">./gradlew packageTemplateMyTemplate</code></pre>
</div>
</div>
<div class="paragraph">
<p>The project template archive will be created in the build directory
with the name '-template-.zip'. See the small section below on how the
template version is derived.</p>
</div>
<div class="paragraph">
<p>You can also package all the templates in one fell swoop:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">./gradlew packageAllTemplates</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once a template is packaged up, you can publish it to a generic (non-Maven) Bintray repository by running</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">./gradlew publishTemplate&lt;TemplateName&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will initially fail, because the build does not know where to
publish to. That&#8217;s quickly fixed by adding a gradle.properties file in
the root of this project that contains at least these properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">repo.username=your_bintray_username
repo.apiKey=your_bintray_apikey</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can then publish new versions of templates whenever you want. Note
that you cannot republish with this mechanism, so remember to
increment the version if you need to.</p>
</div>
<div class="paragraph">
<p>Finally, you can publish the whole shebang (unusual) with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">./gradlew publishAllTemplates</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you don&#8217;t want to publish your template you can install it locally
using the installTemplate rule.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell"> ./gradlew installTemplate&lt;TemplateName&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will install the template to ~/.lazybones/templates so that you
can use it without moving it to bintray first.</p>
</div>
<div class="paragraph">
<p>And that&#8217;s it for the project templates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_template_versions">8.3. Template versions</h3>
<div class="paragraph">
<p>You define the version of a template by putting a VERSION file in the
root directory of the template that contains just the version
number. For example, you specify a version of 1.2.8 for the
my-template template by adding the file
src/templates/my-template/VERSION with the contents</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">1.2.8</code></pre>
</div>
</div>
<div class="paragraph">
<p>That&#8217;s it! The VERSION file will automatically be excluded from the
project template archive.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_templates">9. Templates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lazybones alone is just a tool that doesn&#8217;t do much. It needs a solid
selection of template packages to make it a compelling solution for
developers' day-to-day needs. That&#8217;s why we try to make it as easy as
possible to develop and publish templates. This guide explains how to
go about both steps.</p>
</div>
<div class="sect2">
<h3 id="_getting_started">9.1. Getting started</h3>
<div class="paragraph">
<p>The first thing you want to do is set up a build for your templates,
because creating and publishing a template involves several steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the directory structure and files for the template</p>
</li>
<li>
<p>Add VERSION and README files</p>
</li>
<li>
<p>Package the template structure into a zip, filtering out .retain
and VERSION files</p>
</li>
<li>
<p>Publish the zip file to a repository (only Bintray supported at the
moment)</p>
</li>
<li>
<p>Fortunately this is dead easy because you can use Lazybones to set
a project up for you! Simply run</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones create lazybones-project my-lzb-templates</code></pre>
</div>
</div>
<div class="paragraph">
<p>and you&#8217;ll get a simple <a href="http://gradle.org/">Gradle</a> build file with a
directory into which you put your templates. The next step is to
create the template.</p>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_template">9.2. Create a template</h3>
<div class="paragraph">
<p>Lazybones templates are simple zip files containing a directory
structure and a bunch of files. How you create that zip file is up to
you, but we&#8217;re going to use the build that was created for us. It
handles both the packaging and publishing of templates, so we don&#8217;t
have to worry about the details.</p>
</div>
<div class="paragraph">
<p>So let&#8217;s create a new template Java project with just a Gradle build
file and some standard directories. First, create the directory
<code>templates/simple-java/</code>. This is where our template files are going
to go. Inside this new directory, add these files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>README.md - a text file that contains information about the template</p>
</li>
<li>
<p>VERSION - a text file containing the current version number of the template</p>
</li>
<li>
<p>build.gradle - the build file for building this new project</p>
</li>
<li>
<p>src/main/java/.retain</p>
</li>
<li>
<p>src/main/resources/.retain</p>
</li>
<li>
<p>src/test/java/.retain</p>
</li>
<li>
<p>src/test/resources/.retain</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>.retain</code> files allow us to include empty directories in both a
git repository and the template zip. The build simply excludes
<code>.retain</code> files when packaging the template while maintaining the
directory structure. Note that the <code>.retain</code> files can be empty, so a
simple <code>touch</code> <code>src/main/java/.retain</code> is sufficient.</p>
</div>
<div class="paragraph">
<p>The <code>build.gradle</code> file is part of this template project and just
contains:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">apply plugin: "java"

group = "org.example"
version = "0.1"

repositories {
    mavenCentral()
}

dependencies {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>VERSION</code> file is required by the build, because that&#8217;s how the
build knows what the current version of the template is. Just put any
version string into the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">1.0-SNAPSHOT</code></pre>
</div>
</div>
<div class="paragraph">
<p>No quotes. No markup. Just the version text. Note that the build
excludes this file from the template zip as the version is included in
the zip file&#8217;s name.</p>
</div>
<div class="paragraph">
<p>Finally, <code>README.md</code> contains some information about the
template. Remember that this is displayed immediately after a new
project is created from the template, so it should offer some guidance
on what the template provides and what steps to take next with the new
project. Add this to the file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">Simple Java project template
------------------------------

You have just created a basic Java application. It provides a standard
project structure and a basic Gradle build. Simply add your source files
to `src/main/java`, your test cases to `src/test/java` and then you will
be able to build your project with

    gradle build
    gradle compile
    gradle test

Don't forget to add any extra JAR dependencies to `build.gradle`!</code></pre>
</div>
</div>
<div class="paragraph">
<p>Although the README is not required, you really should include one. It
doesn&#8217;t have to be Markdown either or have a file extension. We just
happen to like the Markdown syntax and the way that GitHub handles
files with an md extension.</p>
</div>
<div class="paragraph">
<p>We could simply leave the template as it is, but wouldn&#8217;t it be great
if the user could set the group ID and version for the project at
creation time? That would mean parameterising the group and version in
the build file. Not a problem: we can add a post-install script.</p>
</div>
</div>
<div class="sect2">
<h3 id="_create_a_post_install_script">9.3. Create a post-install script</h3>
<div class="paragraph">
<p>Post-install scripts are executed immediately after a template is
unpacked into the new project directory and just before the README is
displayed. They are straight Groovy scripts with access to just the
core Groovy classes, plus Groovy&#8217;s <code>SimpleTemplateEngine</code> and
<a href="http://commons.apache.org/proper/commons-io/">Apache Commons IO</a> (for
making file manipulation easier).</p>
</div>
<div class="paragraph">
<p>Every script has access to the following properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>projectDir</code> - (v0.7+) a <code>File</code> instance representing the root
directory of the new project. Treat this as read-only.</p>
</li>
<li>
<p><code>targetDir</code> - (deprecated) a string representing the root directory
of the new project. Use this for versions of Lazybones prior to
0.7. Treat as read-only.</p>
</li>
<li>
<p><code>fileEncoding</code> - the encoding used by your template files. You can
set this at the start of the script. Defaults to UTF-8.</p>
</li>
<li>
<p><code>lazybonesVersion</code> - a string representing the version of Lazybones
the user is running.</p>
</li>
<li>
<p><code>lazybonesMajorVersion</code> - a string representing the first number in
the version string, e.g. "1" for "1.2.3".</p>
</li>
<li>
<p><code>lazybonesMinorVersion</code> - a string representing the second number in
the version string, e.g. "2" for "1.2.3".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The script also has access to all the public and protected methods and
properties defined in the
<a href="https://github.com/pledbrook/lazybones/blob/master/lazybones-app/src/main/groovy/uk/co/cacoethes/lazybones/LazybonesScript.groovy">LazybonesScript</a>
class. Of particular interest are the <code>ask()</code> and <code>processTemplates()</code>
methods.</p>
</div>
<div class="paragraph">
<p><code>ask()</code> allows the script to request input from a user, such as 'y' or
'n' for whether to include a particular feature or not. Even better,
the user can provide the input on the command line, bypassing the
input requests all together.</p>
</div>
<div class="paragraph">
<p><code>processTemplates()</code> makes it easy to parameterise any of the files in
your template using Groovy syntax. It basically runs the source file
through Groovy&#8217;s <code>SimpleTemplateEngine</code> to produce the resulting
file. So if we want to allow the user to specify the project&#8217;s group
ID and version at install time, we modify <code>build.gradle</code> slightly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">apply plugin: "java"

group = "${group}"
version = "${version}"

repositories {
    mavenCentral()
}

dependencies {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and then add a post-install script, lazybones.groovy, in the root of
the template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def props = [:]
props.group = ask("Define value for 'group' [org.example]: ", "org.example", "group")
props.version = ask("Define value for 'version' [0.1]: ", "0.1", "version")

processTemplates "build.gradle", props</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sorted! And if the user wants to bypass the two asks, he or she can
provide values for the requested properties on the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones create simple-java my-java-app -Pgroup=uk.co.cacoethes -Pversion=1.0-SNAPSHOT</code></pre>
</div>
</div>
<div class="paragraph">
<p>In other words, you get non-interactive creation of projects from
templates.</p>
</div>
<div class="paragraph">
<p>Another useful method available to post-install scripts is
<code>transformText()</code>. It&#8217;s common for scripts to convert strings between
camel case (for class names perhaps), lower-case hyphenated (for
directory names), and other forms. The <code>transformText()</code> method allows
you to do just that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import uk.co.cacoethes.util.NameType

def className = "MyClass"
def directoryForClass = transformText(className, from: NameType.CAMEL_CASE, to: NameType.HYPHENATED)
new File(directoryForClass).mkdirs()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>from</code> and <code>to</code> arguments are both required and must be one of the
<code>NameType</code> enum values: <code>CAMEL_CASE</code> ("MyClass"), <code>PROPERTY</code>
("myClass"), <code>HYPHENATED</code> ("my-class"), or <code>NATURAL</code> ("My Class")</p>
</div>
<div class="paragraph">
<p>Once the template is ready, it&#8217;s time to try it out and publish it.</p>
</div>
</div>
<div class="sect2">
<h3 id="_package_install_and_publish">9.4. Package, install and publish</h3>
<div class="paragraph">
<p>There are three steps to publishing a template, each of which can be accomplished with a simple task provided by the build:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>packaging</code> - zipping up the template directory</p>
</li>
<li>
<p><code>installing</code> - putting the template package into the local Lazybones
template cache</p>
</li>
<li>
<p><code>publishing</code> - making the template package available publicly in a
Bintray repository</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The relevant Gradle tasks are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>packageTemplate&lt;Name&gt;</code></p>
</li>
<li>
<p><code>packageAllTemplates</code></p>
</li>
<li>
<p><code>installTemplate&lt;Name&gt;</code></p>
</li>
<li>
<p><code>installAllTemplates</code></p>
</li>
<li>
<p><code>publishTemplate&lt;Name&gt;</code></p>
</li>
<li>
<p><code>publishAllTemplates</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The packaging tasks aren&#8217;t often used, so we&#8217;ll skip over those right
now. But installing the templates in your local cache is important so
that you can easily test them before publication. You can do this on a
per-template basis, or simply install all the templates in your
templates directory.</p>
</div>
<div class="paragraph">
<p>So if you want execute a task for a particular template, what is
<code>&lt;Name&gt;</code> in the above tasks? It&#8217;s derived from the name of the
template, which comes from the directory name. In our case, the
template name is simple-java. To use this name in the Gradle tasks, we
simply camel-case it: SimpleJava. Of course, this means your
directories should use hyphenated notation rather than camel-case.</p>
</div>
<div class="paragraph">
<p>Installing the <code>simple-java</code> template in the local cache then becomes a
case of</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">./gradlew installTemplateSimpleJava</code></pre>
</div>
</div>
<div class="paragraph">
<p>which can then be tested with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones create simple-java 1.0-SNAPSHOT my-java-app -Pgroup=uk.co.cacoethes -Pversion=0.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you have to specify the version of the template to install,
otherwise Lazybones will look up the latest version online and either
say the template doesn&#8217;t exist, or use whatever the latest version is
(not your development version).</p>
</div>
<div class="paragraph">
<p>If the rules for converting between camel-case and hyphenated forms
don&#8217;t suit your template name, for example if you separate numbers
with hyphens ('javaee-7'), then you can use hyphens in the task name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">./gradlew packageTemplate-javaee-7</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you&#8217;re happy with the template, you can publish it to a Bintray
repository. To do that, you have to configure the build. If you have a
look at <code>build.gradle</code>, you&#8217;ll see this section (+ some comments):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">lazybones {
    // Pre version 1.1 of the Lazybones Gradle plugin, you needed
    // to specify this property:
    //     repositoryUrl = "https://api.bintray.com/content/&lt;account&gt;/&lt;templates-repo&gt;"
    // instead of `repositoryName`
    repositoryName = "&lt;account&gt;/&lt;repo&gt;"             // e.g. "pledbrook/lazybones-templates"
    repositoryUsername = "your_bintray_username"
    repositoryApiKey = "your_bintray_api_key"

    // These are required for open source packages
    licenses = ["Apache-2.0"]
    vcsUrl = "https://github.com/pledbrook/lazybones/tree/master/lazybones-templates"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, the repository name, username, and API key properties
need to be set up properly. You can hard-code the repository name in
the build file (just replace <code>&lt;account&gt;</code> and <code>&lt;repo&gt;</code> appropriately),
but the username and API key shouldn&#8217;t be included in a file that will
probably go into version control.</p>
</div>
<div class="paragraph">
<p>Instead, create a <code>gradle.properties</code> file in the root of the project
(not the root of the <code>simple-java</code> template, but the overall project
directory) and put the following into it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">bintrayUsername=someone
bintrayApiKey=sfhakfh2948th9ghagh4gh30948g93hg</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course, put your actual username and key in there! Then update
build.gradle with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">lazybones {
    repositoryName = "..."
    repositoryUsername = project.bintrayUsername
    repositoryApiKey = project.bintrayApiKey
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>So now the repository credentials are being initialised from the
(non-SCM-controlled) properties file.</p>
</div>
<div class="paragraph">
<p>Bintray adds a couple of extra restrictions on publishing if you are
using the open source hosting. If that&#8217;s the case, you will need to
add <code>licenses</code> and <code>vcsUrl</code> properties to the Lazybones configuration
block. The assumption here is that all templates in a project are
licensed under the same OSS licence and the <code>vcsUrl</code> property points
to the host source repository for the whole project.</p>
</div>
<div class="paragraph">
<p>Before you can successfully publish to Bintray, you of course have to
have an account. You also have to set up a repository, which you can
do through the Bintray web UI. Once that&#8217;s done, you can run</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">./gradlew publishTemplateSimpleJava</code></pre>
</div>
</div>
<div class="paragraph">
<p>to make it available to all and sundry! Don&#8217;t forget to go to the
Bintray UI in order to finalise the publication. You can also send an
inclusion request for your package to
<code>pledbrook/lazybones-templates</code>. If accepted, your template will
automatically appear in the <code>lazybones list</code> command.</p>
</div>
</div>
<div class="sect2">
<h3 id="_fine_tuning_the_packaging">9.5. Fine-tuning the packaging</h3>
<div class="paragraph">
<p><strong>(since version 1.2 of the Gradle plugin)</strong></p>
</div>
<div class="paragraph">
<p>The packaging process is by default rather dumb. It will include all
files and directories in the target template directory except for a
few hard-coded exceptions (the VERSION and .retain files for
example). That leaves a lot of scope for accidentally including
temporary files in the package! To help you avoid that, the plugin
allows you to specify a set of extra exclusions using Ant-style paths:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">lazybones {
    packageExclude "**/*.swp", ".gradle", "build"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These exclusions apply to all templates. If you want template-specific
exclusions, then use the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">lazybones {
    template("simple-java") {     // Template (directory) name
        packageExclude "**/*.swp", ".settings"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the template-specific settings completely override the
global ones, so if you want the global ones to apply you will need to
repeat them in the template-specific list.</p>
</div>
<div class="paragraph">
<p>Another potential issue when packaging templates is with file and
directory permissions. Lazybones attempts to retain the permissions it
finds in the template directory, but these may not be correct on
Windows. To compensate for that, the plugin allows you to specify file
permissions in the template configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">lazybones {
    fileMode "755", "gradlew", "**/*.sh"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first argument is the Unix-style permission as a string (such as
<code>"600"</code>, <code>"755"</code> and so on), and the rest are a list of Ant-style
patterns representing the files and directories that the permission
string should apply to. You can have multiple <code>fileMode()</code> entries,
although ideally you should only have one per file mode.</p>
</div>
<div class="paragraph">
<p>As with package exclusions, you can also specify file modes on a
per-template basis:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">lazybones {
    template("simple-java") {
        fileMode "600", "secret.properties"
        fileMode "755, "gradlew", "**/*.sh"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, the template-specific settings replace the global ones for that
particular template.</p>
</div>
<div class="paragraph">
<p>That&#8217;s it for the getting started guide. You&#8217;ve created a template,
tested it, and finally published it to Bintray. For the rest of the
guide we&#8217;ll look at the template creation in more detail.</p>
</div>
</div>
<div class="sect2">
<h3 id="_template_engines">9.6. Template engines</h3>
<div class="paragraph">
<p>The <code>processTemplates()</code> method available to post-install scripts
allows you to generate files based on templates. By default, any files
that match the pattern passed to <code>processTemplates()</code> are treated as
Groovy templates that can be processed by
<a href="http://docs.groovy-lang.org/latest/html/api/groovy/text/SimpleTemplateEngine.html">SimpleTemplateEngine</a>
and those source files are replaced by the processed versions. That&#8217;s
not the end of the story though.</p>
</div>
<div class="paragraph">
<p>Lazybones allows you to use any template engine that implements
Groovy&#8217;s
<a href="http://docs.groovy-lang.org/latest/html/api/groovy/text/TemplateEngine.html">TemplateEngine</a>,
meaning that your source templates could be Moustache, Velocity, or
anything else. Of course, not every template engine has a Groovy
implementation but it&#8217;s often trivial to create an adapter
<code>TemplateEngine</code> implementation. For the following examples, we&#8217;ll use
a Handlebars implementation.</p>
</div>
<div class="paragraph">
<p>The first step to using an alternative template engine is to include
the implementation JAR in the post-install script for your project
template. Lazybones uses Groovy&#8217;s <code>@Grab</code> annotation for that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab(group="uk.co.cacoethes", module="groovy-handlebars-engine", version="0.2")
import uk.co.cacoethes.handlebars.HandlebarsTemplateEngine

registerDefaultEngine new HandlebarsTemplateEngine()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Handlebars engine JAR is in
<a href="https://bintray.com/bintray/jcenter">jCenter</a> which @Grab automatically
searches along with Maven Central. If you have the JAR hosted
elsewhere, you&#8217;ll need to use
<a href="http://docs.groovy-lang.org/latest/html/api/groovy/lang/GrabResolver.html">@GrabResolver</a>.</p>
</div>
<div class="paragraph">
<p>Once you have the JAR on the script&#8217;s classpath, you can register the
engine. There are several ways to do this depending what you want to
do. The above example uses <code>registerDefaultEngine()</code> to make the
Handlebars template engine the default, which means that any files
handled by <code>processTemplates</code> will be treated as Handlbars templates
rather than Groovy ones.</p>
</div>
<div class="paragraph">
<p>What if you want to use different engines for different templates
though? Or perhaps you prefer to give the source templates a suffix
that identifies them as such? In these cases, you can use
<code>registerEngine()</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab(group="uk.co.cacoethes", module="groovy-handlebars-engine", version="0.2")
import uk.co.cacoethes.handlebars.HandlebarsTemplateEngine

registerEngine "hbs", new HandlebarsTemplateEngine()

processTemplates "**/*.groovy", [foo: "bar"]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This method registers a template engine against a specific suffix. If
any files match the <code>processTemplates()</code> pattern with the addition of
the registered suffix, Lazybones will use the corresponding template
engine for that file.</p>
</div>
<div class="paragraph">
<p>So let&#8217;s say your template project has a
<code>src/main/groovy/org/example/App.groovy.hbs</code> file. The App.groovy part
matches the pattern and <code>hbs</code> is a registered extension. So that file
will be processed by the Handlebars template engine, creating a
<code>src/main/groovy/org/example/App.groovy</code> file in the target
project. Here&#8217;s a summary of how source template files are processed:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filename</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resulting file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">App.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">App.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registered default template engine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">App.groovy.gtpl</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">App.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Groovy template engine</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">App.groovy.hbs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">App.groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handlebars template engine</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Lazybones automatically registers the Groovy template engine against
the suffix <code>gtpl</code>. Also note that you should not include the template
suffix in your file pattern. If you try</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">processTemplates "**/*.hbs", [foo: "bar"]</code></pre>
</div>
</div>
<div class="paragraph">
<p>then Lazybones will in fact use the default template engine for any
source file that has an <code>hbs</code> suffix. It&#8217;s better to use the pattern</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">"**/*"</code></pre>
</div>
</div>
<div class="paragraph">
<p>instead, as then any files ending with <code>hbs</code> will be processed with the
Handlebars template engine. This does raise a problem: the pattern
above will match non-template files too, and Lazybones will process
those files with the default template engine.</p>
</div>
<div class="paragraph">
<p>If you do want to take this approach, then you can disable the default
template engine:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">@Grab(group="uk.co.cacoethes", module="groovy-handlebars-engine", version="0.2")
import uk.co.cacoethes.handlebars.HandlebarsTemplateEngine

registerEngine "hbs", new HandlebarsTemplateEngine()
clearDefaultEngine()

processTemplates "**/*", [foo: "bar"]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will ensure that only source files with a registered template
suffix get processed. All other files are left untouched.</p>
</div>
</div>
<div class="sect2">
<h3 id="_subtemplates">9.7. Subtemplates</h3>
<div class="paragraph">
<p><strong>(since 0.7)</strong></p>
</div>
<div class="paragraph">
<p>As long as you are using version 1.1 or later of the Lazybones Gradle
plugin, it&#8217;s very easy to add subtemplate support to your project
templates. The key points to understand are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Subtemplates are similar to project templates but packaged inside a
project template zip</p>
</li>
<li>
<p>A subtemplate can be included in multiple project templates</p>
</li>
<li>
<p>Subtemplates only take effect when the user runs the <code>lazybones
generate</code> command</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s say you want to add a subtemplate for generating <code>@Entity</code>
classes in a project created from the simple-java template we
introduced earlier. Your starting point is to create a new directory
for the subtemplate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">templates/subtmpl-entity</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that although the subtemplate will be going inside the
simple-jave template, its directory is at the same level as
templates/simple-java. The key is to give the directory name as
'subtmpl-' prefix, as this is what tells the build that it&#8217;s a
subtemplate, resulting in subtmpl-entity being excluded from the
*AllTemplates tasks.</p>
</div>
<div class="paragraph">
<p>The contents of a subtemplate source directory look a little like a
normal project template, except you are unlikely to include as many
files and the README is unnecessary. In this case, we want:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>VERSION</code> - the file containing the current version of the subtemplate</p>
</li>
<li>
<p><code>lazybones.groovy</code> - the post-install script</p>
</li>
<li>
<p><code>Entity.groovy.gtpl</code> - the template source file for entity classes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of these files behaves in the same way as in a project template,
but there are a few subtleties. Consider the template source file for
entities:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">package ${pkg}

import grails.persistence.Entity

@Entity(group="${parentGroup}", version="${parentVersion}")
class ${cls} {
    String name
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This references several parameters: <code>pkg</code>, <code>cls</code>, <code>parentGroup</code> and
<code>parentVersion</code>. Where do these parameters come from? We need to look
into the post-install script, lazybones.groovy, to find out:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">import org.apache.commons.io.FileUtils
import org.apache.commons.io.FilenameUtils

import static org.apache.commons.io.FilenameUtils.concat

def params = [:]
params.pkg = ask("Define value for the package: ", null, "package")
params.cls = ask("Define value for class name: ", null, "class").capitalize()

// Pass in parameters from the project template
params.parentGroup = parentParams.group
params.parentVersion = parentParams.version

processTemplates("Entity.groovy", params)

def pkgPath = params.pkg.replace('.' as char, '/' as char)
def filename = params.cls + ".groovy"
def destFile = new File(projectDir, concat(concat("src/main/groovy", pkgPath), filename))
destFile.parentFile.mkdirs()

FileUtils.moveFile(new File(templateDir, "Entity.groovy"), destFile)

println "Created new persistence entity ${FilenameUtils.normalize(destFile.path)}"</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, the <code>pkg</code> and <code>cls</code> parameters are mapped from the
return values of two <code>ask()</code> calls. This is standard post-install
script behaviour. The interesting parameters, <code>parentGroup</code> and
<code>parentVersion</code>, are mapped from something new: the <code>parentParams</code>
map. This contains any named parameters used by the parent project
template, i.e. simple-java in this case. Because of this,
<code>parentParams</code> only exists for subtemplates.</p>
</div>
<div class="paragraph">
<p>Another novel aspect of the post-install script is the reference to a
<code>templateDir</code> property in addition to <code>projectDir</code>. This is because
subtemplates are not unpacked directly in the project
directory. Instead, Lazybones unpacks them into the project&#8217;s
.lazybones directory. <code>templateDir</code> points to the location of the
unpacked subtemplate, whereas <code>projectDir</code> still points to the root
directory of the project created from simple-java. So your subtemplate
post-install script will typically want to copy or move files from
<code>templateDir</code> to <code>projectDir</code>. The Commons IO classes that all
post-install scripts have access to are ideal for this.</p>
</div>
<div class="paragraph">
<p>With all of the subtemplates files in place, all you need to do is
tell the build that the simple-java project template should include
the entity subtemplate. So open up the build file and add this line to
the <code>lazybones</code> block:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">lazybones {
    ...
    template "simple-java" includes "entity"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note how the name of the subtemplate excludes the 'subtmpl-'
prefix. Now when you package the simple-java project template, the
entity subtemplate will be included in it, ready for use with
Lazybones' <code>generate</code> command.</p>
</div>
<div class="paragraph">
<p>If you want to include multiple subtemplates, just pass extra
arguments to <code>includes()</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">lazybones {
    ...
    template "simple-java" includes "entity", "controller", "view"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is one final option available to template authors. What if you
want to package the entity, controller, and view template files into a
single subtemplate package? How would the user be able to specify
which type of class he or she wants to generate? The answer is through
template qualifiers.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s say you have an 'artifact' subtemplate that includes
Entity.groovy.gtpl, Controller.groovy.gtpl, etc. The user can run the
<code>generate</code> command like this to determine which artifact type to use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones generate artifact::controller</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>::</code> separates the subtemplate name, 'artifact', from the qualifier,
'controller'. In your post-install script, you can access the
qualifiers through a <code>tmplQualifiers</code> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def artifactTemplate
if (tmplQualifiers) {
    artifactTemplate = tmplQualifiers[0].capitalize() + ".groovy.gtpl"
}
else {
    artifactTemplate = ask("Which type of artifact do you want to generate? ", null, "type")
}

// ... process the corresponding template file.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The user can even pass extra qualifiers simply by separating them with
<code>::</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">lazybones generate artifact::controller::org.example::Book</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is why <code>tmplQualifiers</code> is a list. It retains the order that the
qualifiers are specified on the command line.</p>
</div>
<div class="paragraph">
<p>Note qualifiers should not be used for general parameterisation such
as packages and class names. Think carefully before supporting more
than a single qualifier.</p>
</div>
</div>
<div class="sect2">
<h3 id="_post_install_script_in_depth">9.8. Post install script in-depth</h3>
<div class="paragraph">
<p>The lazybones.groovy post install script is a generic groovy script
with a few extra helper methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ask(String message, defaultValue = null)</code> - asks the user a
question and returns their answer, or <code>defaultValue</code> if no answer is
provided</p>
</li>
<li>
<p><code>ask(String message, defaultValue, String propertyName)</code> - works
similarly to the <code>ask()</code> above, but allows grabbing variables from the
command line as well based on the <code>propertyName</code>.</p>
</li>
<li>
<p><code>processTemplates(String filePattern, Map substitutionVariables)</code> -
use ant pattern matching to find files and filter their contents in
place using Groovy&#8217;s <code>SimpleTemplateEngine</code>.</p>
</li>
<li>
<p><code>hasFeature(String featureName)</code> - checks if the script has access
to a feature, <code>hasFeature("ask")</code> or
<code>hasFeature("processTemplates")</code> would both return true</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can get a complete list of the available methods from the
<a href="https://github.com/pledbrook/lazybones/blob/master/lazybones-app/src/main/groovy/uk/co/cacoethes/lazybones/LazybonesScript.groovy">LazybonesScript</a>
class.</p>
</div>
<div class="paragraph">
<p>Here is a very simple example <code>lazybones.groovy</code> script that asks the
user for a couple of values and uses those to populate parameters in
the template&#8217;s build file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">def params = [:]
params["groupId"] = ask("What is the group ID for this project?")
params["version"] = ask("What is the project's initial version?", "0.1", "version")

processTemplates("*.gradle", params)
processTemplates("pom.xml", params)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The main Gradle build file might then look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-groovy" data-lang="groovy">apply plugin: "groovy"

&lt;% if (group) { %&gt;group = "${group}"&lt;% } %&gt;
version = "${version}"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>${}</code> expressions are executed as Groovy expressions and they have
access to any variables in the parameter map passed to
<code>processTemplates()</code>. Scriptlets, i.e. code inside <code>&lt;% %&gt;</code> delimiters,
allow for more complex logic.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contribution_guidelines">10. Contribution guidelines</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We love to see contributions to the project and have tried to make it
easy to do so, for example by keeping its scope small and the code
equally so. If you wish to contribute code, then please keep to the
following guidelines to ensure consistency within the codebase and
that we have happy users.</p>
</div>
<div class="sect2">
<h3 id="_philosophy">10.1. Philosophy</h3>
<div class="paragraph">
<p>Our approach to the project is to keep it small and narrowly
focused. Expect new features to be discussed in-depth before being
accepted (or rejected). This is not a framework, but a simple,
easy-to-use tool for creating template projects. It offers useful
utility functions to template authors, but nothing more.</p>
</div>
</div>
<div class="sect2">
<h3 id="_documentation">10.2. Documentation</h3>
<div class="paragraph">
<p>If you contribute anything that changes the behaviour of the
application, document it in the README! This includes new features,
additional variants of behaviour and breaking changes.</p>
</div>
<div class="paragraph">
<p>Make a note of breaking changes in the pull request because they will
need to go into the release notes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_testing">10.3. Testing</h3>
<div class="paragraph">
<p>This project uses
<a href="http://spockframework.github.io/spock/docs/1.0/index.html">Spock</a> for
its tests. Although any tests are better than none, Spock tests will
be looked on more favourably than other types (such as JUnit). Plus
you&#8217;ll find writing the tests so much nicer!</p>
</div>
<div class="paragraph">
<p>Unit tests are a nice to have, but it&#8217;s the integration tests that are
critical. These are run via</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">./gradlew integTest</code></pre>
</div>
</div>
<div class="paragraph">
<p>and launch the lazybones executable as a separate process. The output
is captured so that you can verify the content. The tests reside in
the <code>src/integTest</code> directory and extend <code>AbstractFunctionalSpec</code>.</p>
</div>
<div class="paragraph">
<p>They use <a href="https://github.com/betamaxteam/betamax">Betamax</a> to intercept
and replay web requests (such as to the Bintray REST API and download
URLs).</p>
</div>
</div>
<div class="sect2">
<h3 id="_commit_messages">10.4. Commit messages</h3>
<div class="paragraph">
<p>It may seem anal to request a particular format for commit messages,
but these are a historical record of what&#8217;s happening in the code base
and consistency makes investigating that history much easier.</p>
</div>
<div class="paragraph">
<p>Please follow the advice of the
<a href="https://github.com/phonegap/phonegap/wiki/Git-Commit-Message-Format">Phonegap
guys</a> when crafting commit messages. The advice basically comes down
to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First line should be maximum 50 characters long</p>
</li>
<li>
<p>It should summarise the change and use imperative present tense</p>
</li>
<li>
<p>The rest of the commit message should come after a blank line</p>
</li>
<li>
<p>We encourage you to use Markdown syntax in the rest of the commit
message</p>
</li>
<li>
<p>Preferably keep to an 80 character limit on lines in the rest of the
message.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a commit is related to a particular issue, put the issue number
after a hash (#) somewhere in the detail. You can put the issue number
in the first line summary, but only if you can also fit in a useful
summary of what was changed in the commit.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example git message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Make create's version argument optional.

Implements issue #3. If the user doesn't provide an explicit version, lazybones retrieves the latest version from Bintray. Integration tests added for the create `command` as well.</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_formatting">10.5. Formatting</h3>
<div class="paragraph">
<p>The rules are simple: use the same formatting as the rest of the
code. The following is a list of the styles we are particularly
particular about:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>4 space indent, no tabs</p>
</li>
<li>
<p>a space between if/elseif/catch/etc. keywords and the parenthesis</p>
</li>
<li>
<p>elseif/else/catch on their own lines</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If in doubt, submit the change and mention in the pull request that
you&#8217;re not sure about a particular style you used. We&#8217;d rather have
the contribution and fix any minor problems than not have the
contribution at all.</p>
</div>
<div class="paragraph">
<p>Ultimately, be aware that the maintainers don&#8217;t have much time to
dedicate to processing pull requests, so the less work they have to do
the more likely and quickly they can merge those pull requests in.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_credits">11. Credits</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_developers">11.1. Developers</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/pledbrook">Peter Ledbrook</a></p>
</li>
<li>
<p><a href="https://github.com/kyleboon">Kyle Boon</a></p>
</li>
<li>
<p><a href="https://github.com/tbarker9">Tommy Barker</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_contributors">11.2. Contributors</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/alkemist">Luke Daley</a></p>
</li>
<li>
<p><a href="https://github.com/tomaslin">Tomas Lin</a></p>
</li>
<li>
<p><a href="https://github.com/rhart">Russell Hart</a></p>
</li>
<li>
<p><a href="https://github.com/dsyer">Dave Syer</a></p>
</li>
<li>
<p><a href="https://github.com/andyjduncan">Andy Duncan</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-07-28 11:59:39 BST
</div>
</div>
</body>
</html>